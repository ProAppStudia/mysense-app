<ion-content class="ion-padding">
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="login-buttons" *ngIf="!isLoggedIn()">
    <button class="login-button" (click)="openLoginModal()">
      <ion-icon slot="start" src="assets/icon/sing-in.svg"></ion-icon>
      –í—Ö—ñ–¥
    </button>
    <button class="register-button" (click)="openRegisterModal()">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
  </div>
  <div class="main-content" *ngIf="homepageData">
    <!-- My Sessions Block -->
    <div *ngIf="isLoggedIn() && userSessions.length > 0" class="my-sessions-block">
      <div class="sessions-header">
        <h2>–ú–æ—ó —Å–µ—Å—ñ—ó</h2>
        <a (click)="viewAllSessions()">–î–∏–≤–∏—Ç–∏—Å—å –≤—Å—ñ</a>
      </div>

      <div class="sessions-list">
        <div class="session-card" *ngFor="let session of userSessions | slice:0:2">
          <div class="session-info">
            <div class="session-date-time">
              <ion-icon name="calendar-outline"></ion-icon>
              <span>{{ formatSessionTime(session.time_range).date }} –æ {{ formatSessionTime(session.time_range).time }}</span>
            </div>
            <div class="doctor-info">
              <img [src]="session.doctor_image" alt="{{ session.doctor_name }}">
              <span>{{ session.doctor_name }}</span>
            </div>
          </div>
          <div class="session-actions">
            <ion-button fill="clear" class="reschedule-button" (click)="rescheduleSession(session)">
              –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏
              <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
            </ion-button>
            <ion-button
              fill="clear"
              [class]="session.is_unpaid ? 'pay-button' : 'cancel-button'"
              (click)="session.is_unpaid ? paySession(session) : cancelSession(session.id)"
            >
              {{ session.is_unpaid ? '–û–ø–ª–∞—Ç–∏—Ç–∏' : '–°–∫–∞—Å—É–≤–∞—Ç–∏' }}
              <ion-icon slot="end" [name]="session.is_unpaid ? 'wallet-outline' : 'close-outline'"></ion-icon>
            </ion-button>
          </div>
        </div>
      </div>
      <ion-button expand="block" class="book-session-button" (click)="openBookSession()">
        <ion-icon name="add-circle-outline" slot="start"></ion-icon>
        –ó–∞–±—Ä–æ–Ω—é–≤–∞—Ç–∏ —Å–µ—Å—ñ—é
      </ion-button>
      <ion-button *ngIf="!isDoctor()" expand="block" class="chat-session-button" routerLink="/tabs/chat">
        <ion-icon name="chatbubbles-outline" slot="start"></ion-icon>
        –ù–∞–ø–∏—Å–∞—Ç–∏ –≤ —á–∞—Ç
      </ion-button>
    </div>

    <!-- Tasks Block -->
    <div *ngIf="isLoggedIn() && !isDoctor()" class="diary-block">
      
      <div class="diary-card">
       <ion-icon name="checkmark-circle-outline"></ion-icon>
        <h3>–ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è</h3>
        <p>–ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Ç–∞ –∫–µ—Ä—É–π—Ç–µ —Å–≤–æ—ó–º–∏ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏, —â–æ–± –∑–∞–ª–∏—à–∞—Ç–∏—Å—è –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–º–∏.</p>
        <ion-button expand="block" class="add-diary-button" routerLink="/tabs/tasks">–î–∏–≤–∏—Ç–∏—Å—å –∑–∞–≤–¥–∞–Ω–Ω—è</ion-button>
      </div>
    </div>

   

    <div *ngIf="!isDoctor()" class="section-1-block">
      <h1 class="main-title">{{ homepageData.section_1.heading }}</h1>
      <p class="description-text">{{ homepageData.section_1.sub_heading }}</p>
      <p class="banner__description__for" *ngIf="bannerDescriptionItems.length > 0; else bannerDescriptionFallback">
        <span class="banner__description__item" *ngFor="let item of bannerDescriptionItems">{{ item }}</span>
      </p>
      <ng-template #bannerDescriptionFallback>
        <p class="banner__description__for">{{ bannerDescriptionRaw }}</p>
      </ng-template>
      <ion-button expand="block" class="select-psychologist-button" routerLink="/tabs/tests">{{ homepageData.section_1.button_test_text || '–ü—ñ–¥—ñ–±—Ä–∞—Ç–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∞' }}</ion-button>

      <div class="banner__benefits">
        <div class="banner__benefit">
          <img src="assets/icon/monitor1.svg" alt="–†–æ–∑—É–º–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º">
          <p>–†–æ–∑—É–º–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º<br>–ø—ñ–¥–±–æ—Ä—É</p>
        </div>

        <div class="banner__benefit">
          <img src="assets/icon/best-choice1.svg" alt="–®–≤–∏–¥–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è">
          <p>–®–≤–∏–¥–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è<br>—Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç—ñ–≤</p>
        </div>
      </div>
    </div>
 <!-- Diary Block -->
    

   
    <!-- How It Works Section -->
    <div *ngIf="!isDoctor()" class="how-it-works-section how-start">
      <h2>My Sense - —Ü–µ –∑—Ä—É—á–Ω–∞ —ñ –ø—Ä–æ—Å—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</h2>
      <p class="how-it-works-description">–°–ø—Ä–æ–±—É–π—Ç–µ —ñ –≤–∏ –ø–µ—Ä–µ–∫–æ–Ω–∞—î—Ç–µ—Å—è –≤ —Ü—å–æ–º—É —Å–∞–º—ñ</p>
      <swiper-container
        class="how-start__slider"
        #howItWorksSwiper
        slides-per-view="1.2"
        space-between="14"
        centered-slides="false"
      >
        <swiper-slide class="how-start__slide">
          <article class="how-start__card">
            <div class="how-start__card-top">
              <span class="how-start__badge">1 <span>–∫—Ä–æ–∫</span></span>
              <span class="how-start__corner" aria-hidden="true"></span>
            </div>
            <h3 class="how-start__title">–ü—Ä–æ–π–¥—ñ—Ç—å —Ç–µ—Å—Ç</h3>
            <div class="how-start__media">
              <img src="https://mysense.care/assets/files/1/test_680943e5d526f.png" alt="–ü—Ä–æ–π–¥—ñ—Ç—å —Ç–µ—Å—Ç">
            </div>
            <p class="how-start__text">–ü—Ä–æ–π–¥—ñ—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π, –∞–ª–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π —Ç–µ—Å—Ç —ñ –º–∏ –∑–∞–ø—Ä–æ–ø–æ–Ω—É—î–º–æ —Ñ–∞—Ö—ñ–≤—Ü—ñ–≤, —è–∫—ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –¥–æ –≤–∞—à–æ–≥–æ –∑–∞–ø–∏—Ç—É</p>
          </article>
        </swiper-slide>

        <swiper-slide class="how-start__slide">
          <article class="how-start__card">
            <div class="how-start__card-top">
              <span class="how-start__badge">2 <span>–∫—Ä–æ–∫</span></span>
              <span class="how-start__corner" aria-hidden="true"></span>
            </div>
            <h3 class="how-start__title">–û–±–µ—Ä—ñ—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∞</h3>
            <div class="how-start__media">
              <img src="https://mysense.care/assets/files/1/step_2_680945b39ef65.png" alt="–û–±–µ—Ä—ñ—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∞">
            </div>
            <p class="how-start__text">–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ø—Ä–æ—Ñ—ñ–ª—ñ –∑–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω–∏—Ö –ø—Å–∏—Ö–æ–ª–æ–≥—ñ–≤ —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å —Ç–æ–≥–æ, —Ö—Ç–æ –≤–∞–º –Ω–∞–π–±—ñ–ª—å—à–µ —Å–ø–æ–¥–æ–±–∞–≤—Å—è</p>
          </article>
        </swiper-slide>

        <swiper-slide class="how-start__slide">
          <article class="how-start__card">
            <div class="how-start__card-top">
              <span class="how-start__badge">3 <span>–∫—Ä–æ–∫</span></span>
              <span class="how-start__corner" aria-hidden="true"></span>
            </div>
            <h3 class="how-start__title">–ó–∞–±—Ä–æ–Ω—é–π—Ç–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</h3>
            <div class="how-start__media">
              <img src="https://mysense.care/assets/files/1/step_3_68094627397f4.png" alt="–ó–∞–±—Ä–æ–Ω—é–π—Ç–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é">
            </div>
            <p class="how-start__text">–û–±–µ—Ä—ñ—Ç—å –∑—Ä—É—á–Ω–∏–π –¥–ª—è –≤–∞—Å —á–∞—Å —ñ–∑ –≥—Ä–∞—Ñ—ñ–∫–∞ –≤—ñ–ª—å–Ω–∏—Ö –≥–æ–¥–∏–Ω, –∑–∞–±—Ä–æ–Ω—é–π—Ç–µ —Ü–µ–π —á–∞—Å —Ç–∞ –∑–¥—ñ–π—Å–Ω—ñ—Ç—å –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ –±–µ–∑–ø–µ—á–Ω—É –ø–ª–∞—Ç—ñ–∂–Ω—É —Å–∏—Å—Ç–µ–º—É.</p>
          </article>
        </swiper-slide>

        <swiper-slide class="how-start__slide">
          <article class="how-start__card">
            <div class="how-start__card-top">
              <span class="how-start__badge">4 <span>–∫—Ä–æ–∫</span></span>
              <span class="how-start__corner" aria-hidden="true"></span>
            </div>
            <h3 class="how-start__title">–ü—Ä–∞—Ü—é–π—Ç–µ –∑ –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –≤ –æ–±—Ä–∞–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ</h3>
            <div class="how-start__media">
              <img src="https://mysense.care/assets/files/1/step_4_6809467347b70.png" alt="–ü—Ä–∞—Ü—é–π—Ç–µ –∑ –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –≤ –æ–±—Ä–∞–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ">
            </div>
            <p class="how-start__text">–û–Ω–ª–∞–π–Ω-–∑—É—Å—Ç—Ä—ñ—á—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º, —è–∫—ñ –≤–∏ –±—É–¥–µ—Ç–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –≤ —á–∞—Ç—ñ —Å–≤–æ–≥–æ –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é. –û—á–Ω—ñ –∑—É—Å—Ç—Ä—ñ—á—ñ –ø—Ä–æ—Ö–æ–¥—è—Ç—å —É –∫–∞–±—ñ–Ω–µ—Ç—ñ –ø—Å–∏—Ö–æ–ª–æ–≥–∞.</p>
          </article>
        </swiper-slide>
      </swiper-container>

      <div class="how-start__nav">
        <button type="button" class="how-start__btn how-start__btn--prev" (click)="slidePrevHowItWorks()" aria-label="–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∫—Ä–æ–∫"></button>
        <button type="button" class="how-start__btn how-start__btn--next" (click)="slideNextHowItWorks()" aria-label="–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫"></button>
      </div>
    </div>
<div *ngIf="!isDoctor()" class="section-1-block">
      
      <h2>{{ homepageData.section_1.text_choise_psyhologist }}</h2>
      <div class="doctor-list">
          <div *ngFor="let doctor of homepageData.doctors | slice:0:6" class="doctor-card">
            <img [src]="'https://mysense.care' + doctor.img" alt="{{ doctor.firstname }}">
          </div>
        </div>
      <ion-button expand="block" class="free-psychologists-button" routerLink="/tabs/filter">–í –∫–∞—Ç–∞–ª–æ–≥</ion-button>
    </div>
<div class="diary-block">
      
      <div class="diary-card">
        <ion-icon name="book-outline"></ion-icon>
        <ng-container *ngIf="todayDiaryExists(); else diaryEmptyState">
          <div class="diary-ready-head">
            <h3>–ó–∞–ø–∏—Å–∏ –≤ —â–æ–¥–µ–Ω–Ω–∏–∫—É</h3>
            <a routerLink="/tabs/diary">–í—Å—ñ –∑–∞–ø–∏—Å–∏</a>
          </div>
          <a class="diary-ready-preview" routerLink="/tabs/diary">
            <div class="diary-ready-preview__chips">
              <span class="diary-ready-preview__chip">
                <img *ngIf="todayDiaryMoodIcon(); else moodEmojiTpl" [src]="todayDiaryMoodIcon()" alt="">
                <ng-template #moodEmojiTpl>üôÇ</ng-template>
                <span>{{ todayDiaryMoodLabel() }}</span>
              </span>
              <span class="diary-ready-preview__chip" *ngIf="todayDiaryBodyLabel()">
                <img *ngIf="todayDiaryBodyIcon(); else bodyEmojiTpl" [src]="todayDiaryBodyIcon()" alt="">
                <ng-template #bodyEmojiTpl>üôÇ</ng-template>
                <span>{{ todayDiaryBodyLabel() }}</span>
              </span>
            </div>
            <div
              class="diary-ready-preview__chart"
              aria-hidden="true"
            >
              <div class="diary-ready-preview__y">
                <span>üòä</span>
                <span>üôÇ</span>
                <span>üòê</span>
                <span>üôÅ</span>
                <span>üò≠</span>
              </div>
              <div class="diary-ready-preview__plot">
                <span class="diary-ready-preview__line"></span>
                <span class="diary-ready-preview__line"></span>
                <span class="diary-ready-preview__line"></span>
                <span class="diary-ready-preview__line"></span>
                <span class="diary-ready-preview__line"></span>
                <span
                  class="diary-ready-preview__dot"
                  *ngFor="let dot of weekMoodDots()"
                  [style.--dot-col]="dot.col"
                  [style.--dot-row]="dot.row"
                ></span>
              </div>
              <div class="diary-ready-preview__x">
                <span>–ü–Ω</span>
                <span>–í—Ç</span>
                <span>–°—Ä</span>
                <span>–ß—Ç</span>
                <span>–ü—Ç</span>
                <span>–°–±</span>
                <span>–ù–¥</span>
              </div>
            </div>
          </a>
        </ng-container>
        <ng-template #diaryEmptyState>
          <h3>–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Å–≤—ñ–π —â–æ–¥–µ–Ω–Ω–∏–∫</h3>
          <p>–ù–µ –∑–∞–±—É–≤–∞–π—Ç–µ –≤–µ—Å—Ç–∏ —Å–≤—ñ–π –æ—Å–æ–±–∏—Å—Ç–∏–π —â–æ–¥–µ–Ω–Ω–∏–∫, –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –Ω–∞—Å—Ç—Ä—ñ–π —Ç–∞ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ —Å–≤–æ—ó –¥—É–º–∫–∏.</p>
          <ion-button expand="block" class="add-diary-button" routerLink="/tabs/diary">
            –î–æ–¥–∞—Ç–∏ –∑–∞–ø–∏—Å
          </ion-button>
        </ng-template>
      </div>
    </div>

    <!-- Section 3 -->
    <div *ngIf="!isDoctor()" class="free-consultation-banner">
      <span class="free-tag">—Ü–µ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ ;)</span>
      <h2 class="banner-title">{{ homepageData.section_3.heading_acquaintance }}</h2>
      <p class="banner-description">{{ homepageData.section_3.text_acquaintance }}</p>
      <ion-button expand="block" class="select-psychologist-button-white">–ü—ñ–¥—ñ–±—Ä–∞—Ç–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∞</ion-button>
    </div>

    <!-- Reviews Slider Section -->
    <div class="reviews-container">
      <div class="reviews-slider-section">
        <h3>{{ homepageData.section_9.heading }}</h3>
        <div class="swiper-navigation-container">
          <ion-icon class="swiper-button-prev-custom" src="assets/icon/sl-arrow-left.svg" (click)="slidePrevReviews()"></ion-icon>
          <swiper-container class="reviews-swiper" #reviewsSwiper slides-per-view="1" centered-slides="true">
            <swiper-slide *ngFor="let review of homepageData.section_9.reviews">
              <div class="review-slide-content">
                <img class="review-quote-icon" src="assets/icon/quetes-comment.svg" alt="–õ–∞–ø–∫–∏">
                <h3>{{ review.user_name }}</h3>
                <p class="review-text-content" [class.expanded]="review.showFullText">
                  {{ review.text }}
                </p>
                <button class="rewiew-more" fill="clear" size="small" (click)="toggleText(review)">
                  {{ review.showFullText ? '–ó–≥–æ—Ä–Ω—É—Ç–∏' : '–ü–æ–∫–∞–∑–∞—Ç–∏ —â–µ' }}
                </button>
                <p class="review-date">{{ review.date }}</p>
              </div>
            </swiper-slide>
          </swiper-container>
          <ion-icon class="swiper-button-next-custom" src="assets/icon/sl-arrow-right.svg" (click)="slideNextReviews()"></ion-icon>
        </div>
      </div>
    </div>

    <!-- Section 10 - Accordion for Questions and Answers -->
    <div *ngIf="!isDoctor()" class="section-10">
      <h2>{{ homepageData.section_10.heading }}</h2>
      <ion-accordion-group>
        <ion-accordion *ngFor="let item of homepageData.section_10.items" value="{{ item.heading }}" toggleIcon="add-outline" toggleIconSlot="end">
          <ion-item slot="header">
            <ion-label>{{ item.heading }}</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <div [innerHTML]="item.content"></div>
          </div>
        </ion-accordion>
      </ion-accordion-group>
     <!-- <ion-button expand="block">{{ homepageData.section_10.text_button }}</ion-button>-->
    </div>
 <!-- Tests Block -->
  <!--<div class="tests-block">
    <app-tests-block></app-tests-block>
  </div>-->
    <!-- Section 11 -->
    <div class="articles-container">
      <div class="section-11">
        <h2>{{ homepageData.section_11.heading }}</h2>
        <div class="articles-slider-container">
          <swiper-container class="articles-swiper" #articlesSwiper pagination="true" slides-per-view="1" centered-slides="true">
            <swiper-slide *ngFor="let article of homepageData.section_11.articles">
            <div class="article-card">
              <img [src]="article.img" alt="{{ article.title }}">
              <h3>{{ article.title }}</h3>
              <p>{{ article.short_description }}</p>
              <p class="article-date">{{ article.date }}</p>
            </div>
            </swiper-slide>
          </swiper-container>
        </div>
      </div>
    </div>

  </div>

  <ion-modal [isOpen]="loginOpen()" (willDismiss)="closeLoginModal()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="end">
            <ion-button (click)="closeLoginModal()">
              <ion-icon name="close-outline" class="close-icon"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <form class="loginform" [formGroup]="loginForm" (ngSubmit)="onSubmitLogin()">
          <ion-text>
            <h1 class="ion-text-center">–í—Ö—ñ–¥ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç</h1>
            <p class="ion-text-center">–£–≤—ñ–π–¥—ñ—Ç—å –¥–æ —Å–≤–æ–≥–æ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É</p>
          </ion-text>
          <ion-list class="login-inputs">
            <ion-item>
              <ion-input
                label="–ï–ª. –∞–¥—Ä–µ—Å–∞"
                labelPlacement="floating"
                formControlName="email"
                autocomplete="email"
                type="email"
              ></ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched">
              <p class="ion-padding-start" *ngIf="loginForm.get('email')?.errors?.['required']">–ï–ª. –∞–¥—Ä–µ—Å–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–∞.</p>
              <p class="ion-padding-start" *ngIf="loginForm.get('email')?.errors?.['email']">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –¥—ñ–π—Å–Ω—É –µ–ª. –∞–¥—Ä–µ—Å—É.</p>
            </ion-text>

            <ion-item>
              <ion-input
                label="–ü–∞—Ä–æ–ª—å"
                labelPlacement="floating"
                formControlName="password"
                autocomplete="current-password"
                [type]="passwordVisible() ? 'text' : 'password'"
              ></ion-input>
              <ion-button slot="end" fill="clear" (click)="togglePasswordVisibility()">
                <ion-icon [name]="passwordVisible() ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
              </ion-button>
            </ion-item>
            <ion-text color="danger" *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
              <p class="ion-padding-start" *ngIf="loginForm.get('password')?.errors?.['required']">–ü–∞—Ä–æ–ª—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π.</p>
              <p class="ion-padding-start" *ngIf="loginForm.get('password')?.errors?.['minlength']">–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤.</p>
            </ion-text>
          </ion-list>

          <div class="ion-padding-vertical ion-text-center">
            <a routerLink="/register" (click)="closeLoginModal()">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a>
            <span class="ion-padding-horizontal"></span>
            <a routerLink="/forgot-password" (click)="closeLoginModal()">–ù–µ –ø–∞–º'—è—Ç–∞—î—Ç–µ —Å–≤—ñ–π –ø–∞—Ä–æ–ª—å?</a>
          </div>

          <ion-text color="danger" *ngIf="errorMsg()">
            <p class="ion-padding-start">{{ errorMsg() }}</p>
          </ion-text>

          <ion-button expand="block" type="submit" [disabled]="loginForm.invalid || loading()">
            <ion-spinner *ngIf="loading()" name="lines-small"></ion-spinner>
            <span *ngIf="!loading()">–£–≤—ñ–π—Ç–∏</span>
          </ion-button>
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!-- Register Modal -->
  <ion-modal [isOpen]="registerOpen()" (willDismiss)="closeRegisterModal()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="end">
            <ion-button (click)="closeRegisterModal()">
              <ion-icon name="close-outline" class="close-icon"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmitRegister()">
          <ion-text>
            <h1 class="ion-text-center">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h1>
            <p class="ion-text-center" *ngIf="registerStep() === 'form'">–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å</p>
            <p class="ion-text-center" *ngIf="registerStep() === 'code'">{{ infoMsg() }}</p>
          </ion-text>

          <ion-list *ngIf="registerStep() === 'form'">
            <ion-item>
              <ion-input label="–Ü–º'—è" labelPlacement="floating" formControlName="name" type="text"></ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('name')?.errors?.['required']">–Ü–º'—è –æ–±–æ–≤'—è–∑–∫–æ–≤–µ.</p>
              <p class="ion-padding-start" *ngIf="registerForm.get('name')?.errors?.['minlength']">–Ü–º'—è –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 2 —Å–∏–º–≤–æ–ª—ñ–≤.</p>
            </ion-text>

            <ion-item>
              <ion-input label="–ü—Ä—ñ–∑–≤–∏—â–µ" labelPlacement="floating" formControlName="surname" type="text"></ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('surname')?.invalid && registerForm.get('surname')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('surname')?.errors?.['required']">–ü—Ä—ñ–∑–≤–∏—â–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ.</p>
              <p class="ion-padding-start" *ngIf="registerForm.get('surname')?.errors?.['minlength']">–ü—Ä—ñ–∑–≤–∏—â–µ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 2 —Å–∏–º–≤–æ–ª—ñ–≤.</p>
            </ion-text>

            <ion-item>
              <ion-input label="–ï–ª. –∞–¥—Ä–µ—Å–∞" labelPlacement="floating" formControlName="email" autocomplete="email" type="email"></ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('email')?.errors?.['required']">–ï–ª. –∞–¥—Ä–µ—Å–∞ –æ–±–æ–≤'—è–∑–∫–æ–≤–∞.</p>
              <p class="ion-padding-start" *ngIf="registerForm.get('email')?.errors?.['email']">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –¥—ñ–π—Å–Ω—É –µ–ª. –∞–¥—Ä–µ—Å—É.</p>
            </ion-text>

            <ion-item>
              <ion-input label="–¢–µ–ª–µ—Ñ–æ–Ω" labelPlacement="floating" formControlName="phone" inputmode="tel" type="tel"></ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('phone')?.errors?.['required']">–¢–µ–ª–µ—Ñ–æ–Ω –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π.</p>
              <p class="ion-padding-start" *ngIf="registerForm.get('phone')?.errors?.['pattern']">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –¥—ñ–π—Å–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É.</p>
            </ion-text>

            <ion-item>
              <ion-input
                label="–ü–∞—Ä–æ–ª—å"
                labelPlacement="floating"
                formControlName="password"
                autocomplete="new-password"
                [type]="registerPasswordVisible() ? 'text' : 'password'"
              ></ion-input>
              <ion-button slot="end" fill="clear" (click)="toggleRegisterPasswordVisibility()">
                <ion-icon [name]="registerPasswordVisible() ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
              </ion-button>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('password')?.errors?.['required']">–ü–∞—Ä–æ–ª—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π.</p>
              <p class="ion-padding-start" *ngIf="registerForm.get('password')?.errors?.['minlength']">–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤.</p>
            </ion-text>

            <ion-item lines="none">
              <ion-checkbox slot="start" formControlName="confirm"></ion-checkbox>
              <ion-label>–Ø –ø–æ–≥–æ–¥–∂—É—é—Å—è –∑ —É–º–æ–≤–∞–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è</ion-label>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('confirm')?.invalid && registerForm.get('confirm')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('confirm')?.errors?.['requiredTrue']">–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–≥–æ–¥–∏—Ç–∏—Å—å –∑ —É–º–æ–≤–∞–º–∏.</p>
            </ion-text>
          </ion-list>

          <ion-list *ngIf="registerStep() === 'code'">
            <ion-item>
              <ion-input label="–ö–æ–¥" labelPlacement="floating" formControlName="code" inputmode="numeric" maxlength="6"></ion-input>
            </ion-item>
            <ion-text color="danger" *ngIf="registerForm.get('code')?.invalid && registerForm.get('code')?.touched">
              <p class="ion-padding-start" *ngIf="registerForm.get('code')?.errors?.['required']">–ö–æ–¥ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π.</p>
            </ion-text>
            <div class="ion-text-center ion-padding-vertical">
              <ion-text *ngIf="countdown() > 0">
                <p>–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ —á–µ—Ä–µ–∑ {{ formatTime(countdown()) }}</p>
              </ion-text>
              <ion-button fill="clear" size="small" (click)="resendCode()" [disabled]="!canResend()">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∫–æ–¥ —â–µ —Ä–∞–∑</ion-button>
            </div>
          </ion-list>

          <ion-text color="danger" *ngIf="errorMsg()">
            <p class="ion-padding-start">{{ errorMsg() }}</p>
          </ion-text>

          <ion-button expand="block" type="submit" [disabled]="registerForm.invalid || loading()">
            <ion-spinner *ngIf="loading()" name="lines-small"></ion-spinner>
            <span *ngIf="!loading()">{{ registerStep() === 'form' ? '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è' : '–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∫–æ–¥' }}</span>
          </ion-button>
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ion-modal [isOpen]="reservePickerOpen()" (willDismiss)="closeReservePicker()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>–û–±–µ—Ä—ñ—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∞</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeReservePicker()">
              <ion-icon name="close-outline" class="close-icon"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding reserve-picker-modal">
        <div class="reserve-picker-list">
          <button
            type="button"
            class="reserve-picker-item"
            *ngFor="let doctor of recentPsychologists"
            [class.active]="selectedReserveDoctorUserId === doctor.doctor_user_id"
            (click)="selectReserveDoctor(doctor.doctor_user_id)"
          >
            <img [src]="doctor.photo" alt="{{ doctor.fullname }}">
            <span>{{ doctor.fullname }}</span>
          </button>
        </div>

        <ion-button expand="block" class="select-psychologist-button" (click)="continueReserveWithSelectedDoctor()" [disabled]="!selectedReserveDoctorUserId">
          –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏
        </ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>

<ion-content class="ion-padding">
  <div class="main-content" *ngIf="homepageData">
    <!-- My Sessions Block -->
    <div *ngIf="isLoggedIn && userSessions.length > 0" class="my-sessions-block">
      <div class="sessions-header">
        <h2>Мої сесії</h2>
        <a (click)="viewAllSessions()">Дивитись всі</a>
      </div>
      <swiper-container class="sessions-swiper" #sessionsSwiper slides-per-view="auto" free-mode="true">
        <swiper-slide *ngFor="let session of userSessions">
          <div class="session-card">
            <div class="session-type-indicator"></div>
            <div class="session-details">
              <h3>{{ session.type }}</h3>
              <p class="session-status">{{ session.status }}</p>
              <div class="doctor-info">
                <img [src]="'https://mysense.care' + session.doctor_image" alt="{{ session.doctor_name }}">
                <span>{{ session.doctor_name }}</span>
                <ion-icon name="time-outline"></ion-icon>
                <span>{{ formatSessionTime(session.time_range).date }}
                
                {{ formatSessionTime(session.time_range).time }}</span>
              </div>
            </div>
            <ion-icon [name]="session.icon" class="session-icon"></ion-icon>
            <div class="session-actions">
              <ion-button expand="block" fill="outline" class="reschedule-button" (click)="rescheduleSession(session.id)">Перенести</ion-button>
              <ion-button expand="block" fill="outline" color="danger" class="cancel-button" (click)="cancelSession(session.id)">Відмінити</ion-button>
            </div>
          </div>
        </swiper-slide>
      </swiper-container>
      <ion-button expand="block" class="book-session-button">
        <ion-icon name="add-circle-outline" slot="start"></ion-icon>
        Забронювати сесію
      </ion-button>
    </div>

    <!-- New Navigation Block -->
    <div class="quick-actions-block">
      <div class="action-item">
        <ion-icon name="add-circle-outline"></ion-icon>
        <p>Забронювати сесію</p>
      </div>
      <div class="action-item" (click)="viewAllSessions()">
        <ion-icon name="calendar-outline"></ion-icon>
        <p>Мої сесії</p>
      </div>
      <div class="action-item">
        <ion-icon name="document-text-outline"></ion-icon>
        <p>Мої завдання</p>
      </div>
      <div class="action-item">
        <ion-icon name="chatbubbles-outline"></ion-icon>
        <p>Мої чати</p>
      </div>
      <div class="action-item">
        <ion-icon name="checkbox-outline"></ion-icon>
        <p>Підібрати психолога</p>
      </div>
      <div class="action-item">
        <ion-icon name="people-outline"></ion-icon>
        <p>Список психологів</p>
      </div>
    </div>

    <!-- Diary Block -->
    <div class="diary-block">
      
      <div class="diary-card">
        <ion-icon name="book-outline"></ion-icon>
        <h3>Заповніть свій щоденник</h3>
        <p>Не забувайте вести свій особистий щоденник, відстежувати настрій та записувати свої думки.</p>
        <ion-button expand="block" class="add-diary-button" routerLink="/tabs/diary">Додати запис</ion-button>
      </div>
    </div>

    <h1 class="main-title">{{ homepageData.section_1.heading }}</h1>
    <p class="description-text">{{ homepageData.section_1.sub_heading }}</p>
    <ion-button expand="block" class="select-psychologist-button">{{ homepageData.section_1.button_test_text }}</ion-button>
    <p class="or-text">{{ homepageData.section_1.text_choise_psyhologist }}</p>
    <div class="doctor-list">
        <div *ngFor="let doctor of homepageData.doctors | slice:0:6" class="doctor-card">
          <img [src]="'https://mysense.care' + doctor.img" alt="{{ doctor.firstname }}">
        </div>
      </div>
    <ion-button expand="block" class="free-psychologists-button">Вільні психологи</ion-button>

    <!-- How It Works Section -->
    <div class="how-it-works-section">
      <h2>Як це працює?</h2>
      <div class="step">
        <p class="step-number">01</p>
        <h3 class="step-title">Пройдіть тест</h3>
        <p class="step-description">Пройдіть короткий, але ефективний тест і ми запропонуємо фахівців, які максимально підходять до вашого запиту</p>
      </div>
      <div class="step">
        <p class="step-number">02</p>
        <h3 class="step-title">Оберіть психолога</h3>
        <p class="step-description">Перегляньте профілі запропонованих психологів та оберіть того, хто вам найбільше сподобався</p>
      </div>
      <div class="step">
        <p class="step-number">03</p>
        <h3 class="step-title">Забронюйте консультацію</h3>
        <p class="step-description">Оберіть зручний для вас час із графіка вільних годин, забронюйте цей час та здійсніть оплату через безпечну платіжну систему.</p>
      </div>
      <div class="step">
        <p class="step-number">04</p>
        <h3 class="step-title">Працюйте з психологом в обраному форматі</h3>
        <p class="step-description">Онлайн-зустрічі проходять за посиланням, які ви будете отримувати в чаті свого особистого профілю. Очні зустрічі проходять у кабінеті психолога.</p>
      </div>
    </div>

    <!-- Section 3 -->
    <div class="free-consultation-banner">
      <span class="free-tag">це безкоштовно ;)</span>
      <h2 class="banner-title">{{ homepageData.section_3.heading_acquaintance }}</h2>
      <p class="banner-description">{{ homepageData.section_3.text_acquaintance }}</p>
      <ion-button expand="block" class="select-psychologist-button">Підібрати психолога</ion-button>
    </div>

    <!-- Reviews Slider Section -->
    <div class="reviews-slider-section">
       <h2>{{ homepageData.section_9.heading }}</h2>
      <swiper-container class="reviews-swiper" #reviewsSwiper [pagination]="true" slides-per-view="auto" centered-slides="true">
        <swiper-slide *ngFor="let review of homepageData.section_9.reviews">
          <div class="review-slide-content">
            <h3>{{ review.user_name }}</h3>
            <p class="review-text-content" [class.expanded]="review.showFullText">
              {{ review.text }}
            </p>
            <ion-button *ngIf="review.text.length > TRUNCATE_LENGTH" fill="clear" size="small" (click)="toggleText(review)">
              {{ review.showFullText ? 'Згорнути' : 'Більше' }}
            </ion-button>
            <p class="review-date">{{ review.date }}</p>
          </div>
        </swiper-slide>
      </swiper-container>
    </div>

    <!-- Section 10 - Accordion for Questions and Answers -->
    <div class="section-10">
      <h2>{{ homepageData.section_10.heading }}</h2>
      <ion-accordion-group>
        <ion-accordion *ngFor="let item of homepageData.section_10.items" value="{{ item.heading }}">
          <ion-item slot="header" color="light">
            <ion-label>{{ item.heading }}</ion-label>
          </ion-item>
          <div class="ion-padding" slot="content">
            <div [innerHTML]="item.content"></div>
          </div>
        </ion-accordion>
      </ion-accordion-group>
      <ion-button expand="block">{{ homepageData.section_10.text_button }}</ion-button>
    </div>

    <!-- Section 11 -->
    <div class="section-11">
      <h2>{{ homepageData.section_11.heading }}</h2>
      <div class="articles-slider-container">
        <swiper-container class="articles-swiper" #articlesSwiper [pagination]="true" slides-per-view="auto" centered-slides="true">
          <swiper-slide *ngFor="let article of homepageData.section_11.articles">
            <div class="article-card">
              <img [src]="article.img" alt="{{ article.title }}">
              <h3>{{ article.title }}</h3>
              <p>{{ article.short_description }}</p>
            </div>
          </swiper-slide>
        </swiper-container>
      </div>
    </div>

  </div>
</ion-content>

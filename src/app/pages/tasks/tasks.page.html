<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/profile"></ion-back-button>
    </ion-buttons>
    <ion-title>–ú–æ—ó –∑–∞–≤–¥–∞–Ω–Ω—è</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="tasks-page ion-padding">
  <div *ngIf="!isLoggedIn" class="tasks-empty">
    –£–≤—ñ–π–¥—ñ—Ç—å —É –ø—Ä–æ—Ñ—ñ–ª—å, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è.
  </div>

  <ng-container *ngIf="isLoggedIn">
    <div class="chats-row" *ngIf="chats.length > 0">
      <button
        type="button"
        class="chat-chip"
        *ngFor="let chat of chats"
        [class.active]="chat === selectedChat"
        (click)="selectChat(chat)"
      >
        {{ chat.fullname || '–ü—Å–∏—Ö–æ–ª–æ–≥' }}
      </button>
    </div>

    <div class="tasks-list" *ngIf="tasks.length > 0; else emptyTasks">
      <div class="task-card" *ngFor="let task of tasks">
        <div class="task-head">
          <p class="task-text">{{ task.text }}</p>
          <button type="button" class="delete-btn" (click)="deleteTask(task.id)" aria-label="–í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è">üóë</button>
        </div>
        <span class="task-date">{{ task.date }}</span>
        <div class="task-files" *ngIf="task.files?.length">
          <button
            type="button"
            class="task-file-link"
            *ngFor="let file of task.files"
            (click)="openTaskFile(file.url)"
          >
            {{ file.name }}
          </button>
        </div>
      </div>
    </div>

    <ng-template #emptyTasks>
      <div class="tasks-empty">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å.</div>
    </ng-template>
  </ng-container>
</ion-content>

<ion-header>
  <ion-toolbar>
    <ion-title>Фільтри</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">Закрити</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="filter-section">
    <h3 class="filter-section-title">Тип терапії</h3>
    <div class="custom-radio-group tip-terapy">
      <label class="custom-radio-item" [class.selected]="filters.type === 'individual'">
        <input type="radio" name="therapy-type" value="individual" [(ngModel)]="filters.type">
        Індивідуальна
      </label>
      <label class="custom-radio-item" [class.selected]="filters.type === 'family'">
        <input type="radio" name="therapy-type" value="family" [(ngModel)]="filters.type">
        Сімейна
      </label>
      <label class="custom-radio-item" [class.selected]="filters.type === 'child'">
        <input type="radio" name="therapy-type" value="child" [(ngModel)]="filters.type">
        Дитяча
      </label>
    </div>
  </div>

  <div class="filter-section">
    <h3 class="filter-section-title">Напрямки</h3>
    <div class="custom-checkbox-group tip-direction">
      <label class="custom-checkbox-item" *ngFor="let direction of directions" [class.selected]="direction.checked">
        <input type="checkbox" [checked]="direction.checked" (change)="direction.checked = $event.target.checked">
        {{ direction.name }}
      </label>
    </div>
  </div>

  <div class="filter-section">
    <h3 class="filter-section-title">Оберіть формат сесії</h3>
    <div class="custom-radio-group tip-terapy">
      <label class="custom-radio-item" [class.selected]="filters.format === 'online'">
        <input type="radio" name="session-format" value="online" [(ngModel)]="filters.format">
        Онлайн
      </label>
      <label class="custom-radio-item" [class.selected]="filters.format === 'in-person'">
        <input type="radio" name="session-format" value="in-person" [(ngModel)]="filters.format">
        Очно
      </label>
    </div>
  </div>

  <div class="filter-section">
    <h3 class="filter-section-title">Оберіть стать психолога</h3>
    <div class="custom-radio-group tip-terapy">
      <label class="custom-radio-item" [class.selected]="filters.gender === 'any'">
        <input type="radio" name="gender" value="any" [(ngModel)]="filters.gender">
        Не важливо
      </label>
      <label class="custom-radio-item" [class.selected]="filters.gender === 'male'">
        <input type="radio" name="gender" value="male" [(ngModel)]="filters.gender">
        Чоловік
      </label>
      <label class="custom-radio-item" [class.selected]="filters.gender === 'female'">
        <input type="radio" name="gender" value="female" [(ngModel)]="filters.gender">
        Жінка
      </label>
    </div>
  </div>

  <div class="filter-section">
    <h3 class="filter-section-title">Оберіть мову спілкування</h3>
    <div class="custom-radio-group tip-terapy">
      <label class="custom-radio-item" [class.selected]="filters.language === 'ukrainian'">
        <input type="radio" name="language" value="ukrainian" [(ngModel)]="filters.language">
        Українська
      </label>
      <label class="custom-radio-item" [class.selected]="filters.language === 'russian'">
        <input type="radio" name="language" value="russian" [(ngModel)]="filters.language">
        Російська
      </label>
      <label class="custom-radio-item" [class.selected]="filters.language === 'any'">
        <input type="radio" name="language" value="any" [(ngModel)]="filters.language">
        Не важливо
      </label>
    </div>
  </div>

  <div class="filter-section">
    <h3 class="filter-section-title">Оберіть прийнятну ціну</h3>
    <div class="custom-range-group">
      <div class="range-slider">
        <input #rangeInput type="range" min="900" max="2700" [value]="filters.priceRange.lower" (input)="filters.priceRange.lower = $any($event.target.value); updateRangeBackground()">
        <input #rangeInput type="range" min="900" max="2700" [value]="filters.priceRange.upper" (input)="filters.priceRange.upper = $any($event.target.value); updateRangeBackground()">
      </div>
      <div class="custom-range-labels">
        <span>{{ filters.priceRange.lower }}</span>
        <span>{{ filters.priceRange.upper }} грн.</span>
      </div>
    </div>
  </div>

  <div class="filter-actions">
    <button class="custom-filter-button primary" (click)="applyFilters()">Застосувати</button>
    <button class="custom-filter-button secondary" (click)="resetFilters()">Скинути фільтри</button>
  </div>
</ion-content>
